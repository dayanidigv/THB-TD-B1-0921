<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>React.js Fundamentals — Demo</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="container">
      <h1>React.js Fundamentals — Demo (13-10-2025)</h1>
      <p class="muted">Open this file in your browser. No build tools required — uses React and Babel from CDN.</p>

      <section class="card" style="border: 1px solid #ff0000;">
        <!-- <h2>1. Hello (JSX & Props)</h2> -->
        <div id="hello-root"></div>
      </section>

      <section class="card">
        <h2>2. Counter (useState)</h2>
        <div id="counter-root"></div>
      </section>

      <section class="card">
        <h2>3. Todo (list rendering & events)</h2>
        <div id="todo-root"></div>
      </section>

      <section class="card">
        <h2>4. Fetch example (useEffect)</h2>
        <div id="fetch-root"></div>
      </section>

      <footer class="muted">Small examples to illustrate components, state, props and effects.</footer>
    </main>

    <!-- React + ReactDOM (development UMD builds) and Babel for in-browser JSX transform -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

    <!-- in react we use mainly jsx code -->
     <!-- (jsx -> js) -->



    <!-- Examples using modern React (hooks) and JSX. Keep type="text/babel" for in-browser compilation. -->
    <script type="text/babel">
      // 1. Hello component demonstrates JSX and props
      function Hello({ name = 'Student' }) {
        return (
          <div>
            <p>Hello, <strong>{name}</strong>! Welcome to React fundamentals.</p>
          </div>
        );
      }


      function About(){
        return (
          <div>
            <h2>About Us</h2>
            <p>This is the about page.</p>
          </div>
        )
      }

      function Home(){
        return (
          <div>
            <h2>Home</h2>
            <p>This is the home page.</p>
          </div>
        )
      }

      function Main(){
        return (
          // if route == '/about'
          // <About />
          // else
          <Home />
        )
      }

      //  <header style="margin-bottom: 1em; background: #eee; padding: 0.5em;"></header>

      function Header({ name }){
        return (
          <header 
          style={
            { marginBottom: '1em', background: '#eee', padding: '0.5em' }
          }
          >
            <h1>Welcome, {name}!</h1>
            <nav>
              <a href="#home">Home</a> | <a href="#about">About</a>
            </nav>
          </header>
        )
      }

      // <Header name="Vimal" /> -> function Header({name: 'Default'}){}

      // <Header name="Vimal" style={{color: 'red'}} >
      //   <h1>Welcome, Vimal!</h1>
      //   <nav>
      //     <a href="#home">Home</a> | <a href="#about">About</a>
      //   </nav>
      // </Header> -> function Header({name, children}){}

      // children -> {children}

      function Footer({ name }){
        return (
          <footer>
            <hr />
            <p>&copy; 2024. All rights reserved. - {name}</p>
          </footer>
        )
      }

      // main access point
      function app(){
        return (
            <div>

              <Header 
              name="Vimal" 
              style={{ color: 'red' }}
              />

              <Main/>

              <Footer name="Daya" />
            </div>
        )
      }

      // Mount Hello
      ReactDOM.createRoot(document.getElementById('hello-root')).render(app());

      // 2. Counter demonstrates useState
      const { useState, useEffect } = React;

      function Counter() {
        const [count, setCount] = useState(0);
        return (
          <div className="example">
            <p>Count: <strong>{count}</strong></p>
            <button onClick={() => setCount(c => c + 1)}>+1</button>
            <button onClick={() => setCount(0)}>Reset</button>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('counter-root')).render(
        <Counter />
      );

      // 3. Todo: simple list with add/remove (demonstrates controlled input & list rendering)
      function TodoApp(){
        const [items, setItems] = useState(['Learn JSX', 'Try useState']);
        const [text, setText] = useState('');

        function addItem(e){
          e.preventDefault();
          const v = text.trim();
          if(!v) return;
          setItems(prev => [v, ...prev]);
          setText('');
        }

        function removeItem(index){
          setItems(prev => prev.filter((_, i) => i !== index));
        }

        return (
          <div className="example">
            <form onSubmit={addItem} className="todo-form">
              <input value={text} onChange={e => setText(e.target.value)} placeholder="Add todo" />
              <button type="submit">Add</button>
            </form>
            <ul className="todo-list">
              {items.map((it, i) => (
                <li key={i}>
                  {it}
                  <button className="danger" onClick={() => removeItem(i)}>Remove</button>
                </li>
              ))}
            </ul>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('todo-root')).render(
        <TodoApp />
      );

      // 4. Fetch example: useEffect for side effects (fetch a GitHub user)
      function FetchUser({ username = 'octocat' }){
        const [user, setUser] = useState(null);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);

        useEffect(() => {
          let cancelled = false;
          setLoading(true);
          setError(null);
          fetch(`https://api.github.com/users/${username}`)
            .then(res => {
              if(!res.ok) throw new Error('Network response not ok');
              return res.json();
            })
            .then(data => { if(!cancelled) setUser(data); })
            .catch(err => { if(!cancelled) setError(err.message); })
            .finally(() => { if(!cancelled) setLoading(false); });
          return () => { cancelled = true; };
        }, [username]);

        if(loading) return <div className="example">Loading user...</div>;
        if(error) return <div className="example error">Error: {error}</div>;
        if(!user) return null;

        return (
          <div className="example user-card">
            <img src={user.avatar_url} alt="avatar" width="64" height="64" />
            <div>
              <p><strong>{user.login}</strong></p>
              <p>{user.bio || 'No bio'}</p>
              <a href={user.html_url} target="_blank" rel="noopener">View on GitHub</a>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('fetch-root')).render(
        <FetchUser username="octocat" />
      );
    </script>
  </body>
</html>
